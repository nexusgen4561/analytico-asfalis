{% extends "layouts/base.html" %} {% block title %} Dashboard {% endblock %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}

<script
  src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"
  integrity="sha512-ElRFoEQdI5Ht6kZvyzXhYG9NqjtkmlkfYk0wr6wHxU9JEHakS7UJZNeml5ALk+8IKlU6jDgMabC3vkumRokgJA=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"></script>
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-datalabels/2.1.0/chartjs-plugin-datalabels.min.js"
  integrity="sha512-Tfw6etYMUhL4RTki37niav99C6OHwMDB2iBT5S5piyHO+ltK2YX8Hjy9TXxhE1Gm/TmAV0uaykSpnHKFIAif/A=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"></script>

{% endblock stylesheets %} {% block content %}

<!-- [ Main Content ] start -->
<div class="pcoded-main-container">
  <div class="pcoded-wrapper">
    <div class="pcoded-content">
      <div class="pcoded-inner-content">
        <!-- [ breadcrumb ] start -->

        <!-- [ breadcrumb ] end -->
        <div class="main-body">
          <div class="page-wrapper">
            <!-- [ Main Content ] start -->
            <div class="row">
              <!--[ daily sales section ] start-->
              <div class="col-md-6 col-xl-4">
                <div class="card daily-sales">
                  <div class="card-block">
                    <h6 class="mb-4">Insured</h6>
                    <div class="row align-items-center">
                      <div class="col-12">
                        {% if assured: %}
                        <h3 class="f-w-300 d-flex align-items-center m-b-0">
                          <i
                            class="feather icon-arrow-up text-c-green f-30 m-r-10"></i>
                          {{assured}}
                        </h3>
                        {% else: %}
                        <h3
                          class="f-w-100 f-16 d-flex align-items-center m-b-0">
                          <i
                            class="feather icon-arrow-up text-c-green f-30 m-r-10"></i>
                          Please load or upload a dataset first...
                        </h3>
                        {% endif %}
                      </div>
                      <div class="col-12 text-right">
                        <p class="m-b-0">As of {{ date }}</p>
                      </div>
                    </div>
                    <div class="progress m-t-30" style="height: 7px">
                      <div
                        id="progress-bar1"
                        class="progress-bar progress-c-theme"
                        role="progressbar"
                        aria-valuenow="{{ assuredPercentage }}"
                        aria-valuemin="0"
                        aria-valuemax="1000">
                        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
                        <script>
                          $("#progress-bar1").css(
                            "width",
                            "{{assuredPercentage}}%"
                          );
                        </script>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!--[ Monthly  sales section ] starts-->
              <div class="col-md-6 col-xl-4">
                <div class="card Monthly-sales">
                  <div class="card-block">
                    <h6 class="mb-4">Total Insured Premium Amount</h6>
                    <div class="row d-flex align-items-center">
                      <div class="col-12">
                        {% if insAmount: %}
                        <h3 class="f-w-300 align-items-center f-24 m-b-0">
                          <i
                            class="feather icon-arrow-up text-c-green f-30 m-r-10"></i>
                          {{"â‚±{:,.2f}".format(insAmount)}}
                        </h3>
                        {% else: %}
                        <h3
                          class="f-w-100 f-16 d-flex align-items-center m-b-0">
                          <i
                            class="feather icon-arrow-up text-c-green f-30 m-r-10"></i>
                          Please load or upload a dataset first...
                        </h3>
                        {% endif %}
                      </div>
                      <div class="col-12 text-right">
                        <p class="m-b-0">As of {{ date }}</p>
                      </div>
                    </div>
                    <div class="progress m-t-30" style="height: 7px">
                      <div
                        class="progress-bar progress-c-theme2"
                        role="progressbar"
                        style="width: 35%"
                        aria-valuenow="35"
                        aria-valuemin="0"
                        aria-valuemax="100"></div>
                    </div>
                  </div>
                </div>
              </div>
              <!--[ Monthly  sales section ] end-->
              <!--[ year  sales section ] starts-->
              <div class="col-md-6 col-xl-4">
                <div class="card yearly-sales">
                  <div class="card-block">
                    <h6 class="mb-4">Total Feedback Responses</h6>
                    <div class="row d-flex align-items-center">
                      <div class="col-12">
                        {% if fbCount: %}
                        <h3 class="f-w-300 d-flex align-items-center m-b-0">
                          <i
                            class="feather icon-arrow-up text-c-green f-30 m-r-10"></i>
                          {{fbCount}}
                        </h3>
                        {% else: %}
                        <h3
                          class="f-w-100 f-16 d-flex align-items-center m-b-0">
                          <i
                            class="feather icon-arrow-up text-c-green f-30 m-r-10"></i>
                          No responses from the feedback form...
                        </h3>
                        {% endif %}
                      </div>
                      <div class="col-12 text-right">
                        <p class="m-b-0">As of {{ date }}</p>
                      </div>
                    </div>
                    <div class="progress m-t-30" style="height: 7px">
                      <div
                        id="progress-bar"
                        class="progress-bar progress-c-theme"
                        role="progressbar"
                        aria-valuenow="{{ fbCount }}"
                        aria-valuemin="0"
                        aria-valuemax="100">
                        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
                        <script>
                          $("#progress-bar").css("width", "{{fbCount}}%");
                        </script>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- [ Main Content ] end -->
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="pcoded-wrapper">
    <div class="pcoded-content">
      <div class="pcoded-inner-content">
        <div class="main-body">
          <div class="page-wrapper">
            <!-- [ Main Content ] start -->
            <div class="row">
              <div class="col-sm-12">
                <div class="card">
                  <div class="card-header">
                    <h5>Insured Information</h5>
                  </div>
                  <div class="card-block">
                    <div class="row">
                      <div class="col-xs-6 col-sm-6 col-md-6">
                        <div class="card card-style mb-2">
                          <div class="card-body">
                            <div class="card-title">Insured % per Branch</div>
                            <div
                              class="chart-container"
                              style="position: relative">
                              <canvas
                                id="branchChart"
                                width="400"
                                height="225"></canvas>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-xs-6 col-sm-6 col-md-6">
                        <div class="card card-style mb-2">
                          <div class="card-body">
                            <div class="card-title">Insured % per Category</div>
                            <div
                              class="chart-container"
                              style="position: relative">
                              <canvas
                                id="pcategoryChart"
                                width="100"
                                height="60"></canvas>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-12">
                <div class="card">
                  <div class="card-header">
                    <h5>Insured Vehicle Information</h5>
                  </div>
                  <div class="card-block">
                    <div class="row">
                      <div class="col-xs-6 col-sm-6 col-md-6">
                        <div class="card card-style mb-2">
                          <div class="card-body">
                            <div class="card-title">Vehicle Maker</div>
                            <div
                              class="chart-container"
                              style="position: relative">
                              <canvas
                                id="vmakerchart"
                                width="100"
                                height="60"></canvas>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-xs-6 col-sm-6 col-md-6">
                        <div class="card card-style mb-2">
                          <div class="card-body">
                            <div class="card-title">Vehicle Type</div>
                            <div
                              class="chart-container"
                              style="position: relative">
                              <canvas
                                id="vtypechart"
                                width="200"
                                height="125"></canvas>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-xs-6 col-sm-6 col-md-6">
                        <div class="card card-style mb-2">
                          <div class="card-body">
                            <div class="card-title">Vehicle Model Year</div>
                            <div
                              class="chart-container"
                              style="position: relative">
                              <canvas
                                id="modelChart"
                                width="100"
                                height="60"></canvas>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-xs-6 col-sm-6 col-md-6">
                        <div class="card card-style mb-2">
                          <div class="card-body">
                            <div class="card-title">Vehicle Color</div>
                            <div
                              class="chart-container"
                              style="position: relative">
                              <canvas
                                id="vcolorchart"
                                width="100"
                                height="60"></canvas>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- [ Main Content ] end -->
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- [ Main Content ] end -->

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

<script>
  var branch = document.getElementById("branchChart").getContext("2d");
  var branchChart = new Chart(branch, {
    type: "pie",
    data: {
      labels: {{ branchLabels | safe }},
      datasets: [
        {
          data: {{ branchValues | safe }},
          backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850","#265138", "#f4f2dc","#98FE3B","#BF27BD","#616E6A","#4E780E","#851B26","#C8D34B"]
        }
      ]
    },
    options: {
      plugins: {
          datalabels: {
            color: 'blue',
            labels: {
              title: {
                font: {
                  weight: 'bold'
                }
              },
              value: {
                color: 'white'
              }
            }
          }
        }
      },
      plugins: [ChartDataLabels]
  });
</script>

<script>
  var pcategory = document.getElementById("pcategoryChart").getContext("2d");
  var pcategoryChart = new Chart(pcategory, {
    type: "pie",
    data: {
      labels: {{ pcatLabels | safe }},
      datasets: [
        {
          data: {{ pcatValues | safe }},
          backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850","#265138", "#f4f2dc","#98FE3B","#BF27BD","#616E6A","#4E780E","#851B26","#C8D34B"]
        }
      ]
    },
    options: {
      plugins: {
          datalabels: {
            color: 'blue',
            labels: {
              title: {
                font: {
                  weight: 'bold'
                }
              },
              value: {
                color: 'white'
              }
            }
          }
        }
      },
      plugins: [ChartDataLabels]
  });
</script>

<script>
  var vehiclemodel = document.getElementById("modelChart");
  var modelChart = new Chart(vehiclemodel, {
    type: "bar",
    data: {
      labels: {{ modelLabels | safe }},
      datasets: [
        {
          data: {{ modelValues | safe }},
          backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850","#265138", "#f4f2dc","#98FE3B","#BF27BD","#616E6A","#4E780E","#851B26","#C8D34B"]
        }
      ]
    },
    options: {
      plugins: {
          legend: {
            display: false
        }
      }
    }
  });
</script>

<script>
  var vehiclemaker = document.getElementById("vmakerchart");
  var vmakerchart = new Chart(vehiclemaker, {
    type: "bar",
    data: {
      labels: {{ vmakerLabels | safe }},
      datasets: [
        {
          data: {{ vmakerValues | safe }},
          backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850","#265138", "#f4f2dc","#98FE3B","#BF27BD","#616E6A","#4E780E","#851B26","#C8D34B"]
        }
      ]
    },
    options: {
      plugins: {
          legend: {
            display: false
        }
      }
    }
  });
</script>

<script>
  var vehicletype = document.getElementById("vtypechart").getContext("2d");
  var vtypechart = new Chart(vehicletype, {
    type: "pie",
    data: {
      labels: {{ vtypeLabels | safe }},
      datasets: [
        {
          data: {{ vtypeValues | safe }},
          backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850","#265138", "#f4f2dc","#98FE3B","#BF27BD","#616E6A","#4E780E","#851B26","#C8D34B"]
        }
      ]
    },
    options: {
      plugins: {
          datalabels: {
            color: 'blue',
            labels: {
              title: {
                font: {
                  weight: 'bold'
                }
              },
              value: {
                color: 'white'
              }
            }
          }
        }
      },
      plugins: [ChartDataLabels]
  });
</script>

<script>
  var vcolor = document.getElementById("vcolorchart");
  var vcolorchart = new Chart(vcolor, {
    type: "pie",
    data: {
      labels: {{ vcolorLabels | safe }},
      datasets: [
        {
          data: {{ vcolorValues | safe }},
          backgroundColor: ["#bfc3c4", "#e4de28", "#7f0e0e", "#c1dcdb", "#383939", "#000000", "#04a9f5"]
        }
      ]
    },
    options: {
      plugins: {
          datalabels: {
            color: 'blue',
            labels: {
              title: {
                font: {
                  weight: 'bold'
                }
              },
              value: {
                color: 'white'
              }
            }
          }
        }
      },
      plugins: [ChartDataLabels]
  });
</script>
{% endblock javascripts %}
